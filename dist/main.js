"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("atom"),t=require("rxjs-compat/bundles/rxjs-compat.umd.min.js"),r=require("assert"),n=require("log4js"),o=require("path"),i=require("os");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(e),u=s(t),l=s(r),c=s(n),d=s(o),f=s(i);var h={},p={},m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(e){if("string"==typeof e.displayName&&""!==e.displayName)return e.displayName;if("string"==typeof e.name&&""!==e.name)return e.name;return"Unknown"};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;class v{constructor(...e){this.disposed=void 0,this.teardowns=void 0,this.teardowns=new Set,this.disposed=!1,e.length&&this.add(...e)}add(...e){if(this.disposed)throw new Error("Cannot add to an already disposed UniversalDisposable!");for(let t=0;t<e.length;t++)y(e[t]),this.teardowns.add(e[t])}addUntilDestroyed(e,...t){if(this.disposed)throw new Error("Cannot add to an already disposed UniversalDisposable!");const r=new v(...t,e.onDidDestroy((()=>{r.dispose(),this.remove(r)})));this.add(r)}remove(e){this.disposed||this.teardowns.delete(e)}dispose(){this.disposed||(this.disposed=!0,this.teardowns.forEach((e=>{"function"==typeof e.dispose?e.dispose():"function"==typeof e.unsubscribe?e.unsubscribe():"function"==typeof e.destroy?e.destroy():"function"==typeof e&&e()})),this.teardowns=null)}unsubscribe(){this.dispose()}clear(){this.disposed||this.teardowns.clear()}}function y(e){if("function"!=typeof e.dispose&&"function"!=typeof e.unsubscribe&&"function"!=typeof e.destroy&&"function"!=typeof e)throw new TypeError("Arguments to UniversalDisposable.add must be disposable")}g.default=v;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.sleep=b,_.nextTick=function(){return new Promise((e=>{process.nextTick(e)}))},_.triggerAfterWait=async function(e,t,r,n){const o=setTimeout(r,t);try{return await e}finally{clearTimeout(o),n&&n()}},_.timeoutPromise=x,_.createDeadline=function(e){return Date.now()+e},_.timeoutAfterDeadline=function(e,t){const r=e-Date.now();return x(t,r<0?0:r)},_.retryLimit=async function(e,t,r,n=0){let o=null,i=0,s=null;for(;0===i||i<r;){try{if(o=await e(),s=null,t(o))return o}catch(e){s=e,o=null}++i<r&&0!==n&&await b(n)}if(null!=s)throw s;if(i===r)throw new Error("No valid response found!");return o},_.serializeAsyncCall=function(e){let t=null,r=null;const n=()=>{const t=e();return r=t.then((()=>r=null),(()=>r=null)),t},o=()=>(t=null,n());return()=>null==r?n():(null==t&&((0,P.default)(r,"pendingCall must not be null!"),t=r.then(o,o)),t)},_.asyncFind=function(e,t,r){let n=e;return new Promise(((e,o)=>{n=n.slice();const i=n.length,s=async function(o){if(o===i)return void e(null);const a=n[o],u=await t.call(r,a);null!=u?e(u):s(o+1)};s(0)}))},_.denodeify=function(e){return function(...t){return new Promise(((r,n)=>{e.apply(this,t.concat([function(e,t){e?n(e):r(t)}]))}))}},_.asyncLimit=E,_.asyncFilter=async function(e,t,r){const n=[];return await E(e,r||e.length,(async e=>{await t(e)&&n.push(e)})),n},_.asyncObjFilter=async function(e,t,r){const n=Object.keys(e),o={};return await E(n,r||n.length,(async r=>{const n=e[r];await t(n,r)&&(o[r]=n)})),o},_.asyncSome=async function(e,t,r){let n=!1;return await E(e,r||e.length,(async e=>{n||await t(e)&&(n=!0)})),n},_.isPromise=function(e){return Boolean(e)&&"object"==typeof e&&"function"==typeof e.then},_.lastly=function(e,t){return e.then((e=>Promise.resolve(t()).then((()=>e))),(e=>Promise.resolve(t()).then((()=>Promise.reject(e)))))},_.delayTime=function(e){return new Promise(((t,r)=>{setTimeout(t,e)}))},_.PromiseWithState=_.Deferred=_.TimedOutError=_.RequestSerializer=void 0;var w,P=(w=l.default)&&w.__esModule?w:{default:w};function b(e){return new Promise((t=>{setTimeout(t,e)}))}_.RequestSerializer=class{constructor(){this._lastDispatchedOp=void 0,this._lastFinishedOp=void 0,this._latestPromise=void 0,this._waitResolve=void 0,this._lastDispatchedOp=0,this._lastFinishedOp=0,this._latestPromise=new Promise(((e,t)=>{this._waitResolve=e}))}async run(e){const t=this._lastDispatchedOp+1;this._lastDispatchedOp=t,this._latestPromise=e,this._waitResolve();const r=await e;return this._lastFinishedOp<t?(this._lastFinishedOp=t,{status:"success",result:r}):{status:"outdated"}}async waitForLatestResult(){let e=null,t=null;for(;e!==this._latestPromise;)e=this._latestPromise,t=await new Promise(((e,t)=>{this._waitResolve=e,this._latestPromise.then(e)}));return t}isRunInProgress(){return this._lastDispatchedOp>this._lastFinishedOp}};class T extends Error{constructor(e){super(`Timed out after ${String(e)} ms`),this.timeout=void 0,this.timeout=e}}function x(e,t){return new Promise(((r,n)=>{let o=setTimeout((()=>{o=null,n(new T(t))}),t);e.then((e=>{null!=o&&clearTimeout(o),r(e)})).catch((e=>{null!=o&&clearTimeout(o),n(e)}))}))}_.TimedOutError=T;function E(e,t,r){const n=new Array(e.length);let o=0,i=0,s=Math.min(t,e.length)||1;return new Promise(((t,a)=>{const u=async()=>{if(i===e.length)return void(0===o&&t(n));++o;const s=i++;try{n[s]=await r(e[s])}catch(e){a(e)}--o,u()};for(;s--;)u()}))}_.Deferred=class{constructor(){this.promise=void 0,this.resolve=void 0,this.reject=void 0,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}};_.PromiseWithState=class{constructor(e){this._promise=void 0,this._state=void 0,this._state={kind:"pending"},this._promise=e.then((e=>(this._state={kind:"fulfilled",value:e},e)),(e=>{throw this._state={kind:"rejected",error:e},e}))}getPromise(){return this._promise}getState(){return this._state}};var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;var O="undefined"!=typeof performance?()=>performance.now():()=>{const[e,t]=process.hrtime();return 1e3*e+t/1e6};S.default=O,Object.defineProperty(p,"__esModule",{value:!0}),p.track=F,p.isTrackSupported=function(){return U.isTrackSupported()},p.trackImmediate=function(e,t){return U.track(e,t||{},!0)||Promise.resolve()},p.trackEvent=$,p.trackEvents=function(e){return new R.default(e.subscribe($))},p.trackSampled=M,p.startTracking=L,p.trackTiming=N,p.decorateTrackTiming=B,p.trackTimingSampled=W,p.decorateTrackTimingSampled=q,p.setRawAnalyticsService=function(e,t){e.setApplicationSessionObservable(t),U=e},p.default=p.TimingTracker=void 0;var k=j(m),R=j(g),C=_,A=j(S);function j(e){return e&&e.__esModule?e:{default:e}}let U={track(){},isTrackSupported:()=>!1,setApplicationSessionObservable:e=>{}};function F(e,t){U.track(e,t||{})}function $(e){F(e.type,e.data)}function M(e,t,r){Math.random()*t<=1&&U.track(e,{...r,sample_rate:t})}const I="undefined"!=typeof performance;class D{constructor(e,t){this._eventName=void 0,this._startTime=void 0,this._startMark=void 0,this._values=void 0,this._eventName=e,this._startMark=`${this._eventName}_${D.eventCount++}_start`,this._startTime=(0,A.default)(),this._values=t,I&&performance.mark(this._startMark)}onError(e){this._trackTimingEvent(e)}onCancel(){this._trackTimingEvent(null,!0)}onSuccess(){this._trackTimingEvent(null)}_trackTimingEvent(e,t=!1){I&&(performance.measure(this._eventName,this._startMark),performance.clearMarks(this._startMark),performance.clearMeasures(this._eventName)),F("performance",{...this._values,duration:Math.round((0,A.default)()-this._startTime).toString(),eventName:this._eventName,error:e?"1":"0",exception:e?e.toString():"",canceled:t})}}function L(e,t={}){return new D(e,t)}function N(e,t,r={}){const n=L(e,r);try{const e=t();return(0,C.isPromise)(e)?e.then((e=>(n.onSuccess(),e)),(e=>(n.onError(e instanceof Error?e:new Error(e)),Promise.reject(e)))):(n.onSuccess(),e)}catch(e){throw n.onError(e),e}}function B(e,t={}){const r=(0,k.default)(e);function n(...n){return N(r,e.bind(this,...n),t)}return n.displayName=`trackTiming(${r})`,n}function W(e,t,r,n={}){return Math.random()*r<=1?N(e,t,{...n,sample_rate:r}):t()}function q(e,t,r={}){const n=(0,k.default)(e);function o(...o){return W(n,e.bind(this,...o),t,r)}return o.displayName=`trackTimingSampled(${n})`,o}p.TimingTracker=D,D.eventCount=0;var H={track:F,trackSampled:M,trackEvent:$,trackTiming:N,trackTimingSampled:W,startTracking:L,TimingTracker:D,decorateTrackTiming:B,decorateTrackTimingSampled:q};p.default=H;var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var G=function(e){return e&&e.__esModule?e:{default:e}}(g);z.default=class{constructor(){this._providers=void 0,this._providers=[]}addProvider(e){const t=this._providers.findIndex((t=>e.priority>t.priority));return-1===t?this._providers.push(e):this._providers.splice(t,0,e),new G.default((()=>{this.removeProvider(e)}))}removeProvider(e){const t=this._providers.indexOf(e);-1!==t&&this._providers.splice(t,1)}getProviderForEditor(e){const t=e.getGrammar().scopeName;return this.findProvider(t)}getAllProvidersForEditor(e){const t=e.getGrammar().scopeName;return this.findAllProviders(t)}findProvider(e){for(const t of this.findAllProviders(e))return t;return null}*findAllProviders(e){for(const t of this._providers)null!=t.grammarScopes&&-1===t.grammarScopes.indexOf(e)||(yield t)}};var V={},J={},X={};Object.defineProperty(X,"__esModule",{value:!0}),X.attachEvent=function(e,t,r){return e.addListener(t,r),new Z.default((()=>{e.removeListener(t,r)}))},X.observableFromSubscribeFunction=function(e){return K.Observable.create((t=>new Z.default(e(t.next.bind(t)))))};var Z=function(e){return e&&e.__esModule?e:{default:e}}(g),K=u.default;Object.defineProperty(J,"__esModule",{value:!0}),J.existingEditorForUri=function(e){for(const t of atom.workspace.getTextEditors())if(t.getPath()===e)return t;return null},J.existingEditorForBuffer=function(e){for(const t of atom.workspace.getTextEditors())if(t.getBuffer()===e)return t;return null},J.getViewOfEditor=re,J.getScrollTop=function(e){return re(e).getScrollTop()},J.setScrollTop=ne,J.setPositionAndScroll=function(e,t,r){e.setCursorBufferPosition(t,{autoscroll:!1}),ne(e,r)},J.getCursorPositions=function(e){return ee.Observable.defer((()=>{const t=e.getCursors()[0];return(0,Q.default)(null!=t),ee.Observable.merge(ee.Observable.of(t.getBufferPosition()),(0,te.observableFromSubscribeFunction)(t.onDidChangePosition.bind(t)).map((e=>e.newBufferPosition)))}))},J.observeEditorDestroy=function(e){return(0,te.observableFromSubscribeFunction)(e.onDidDestroy.bind(e)).map((t=>e)).take(1)},J.enforceReadOnlyEditor=function(e,t=["append","setText"]){return e.getElement().setAttribute("readonly",""),{dispose(){e.getElement().removeAttribute("readonly")}}},J.enforceSoftWrap=function(e,t){return e.setSoftWrapped(t),e.onDidChangeSoftWrapped((r=>{r!==t&&process.nextTick((()=>{e.isDestroyed()||e.setSoftWrapped(t)}))}))},J.isValidTextEditor=function(e){return e instanceof Y.TextEditor},J.centerScrollToBufferLine=function(e,t){const r=e.getModel(),n=e.pixelPositionForBufferPosition([t,0]).top+r.getLineHeightInPixels()/2-e.clientHeight/2;e.setScrollTop(Math.max(n,1)),e.focus(),r.setCursorBufferPosition([t,0],{autoscroll:!1})};var Q=function(e){return e&&e.__esModule?e:{default:e}}(l.default),Y=a.default,ee=u.default,te=X;function re(e){return atom.views.getView(e)}function ne(e,t){re(e).setScrollTop(t)}var oe={};Object.defineProperty(oe,"__esModule",{value:!0}),oe.goToLocation=async function(e,t){var r,n,o;const i=null===(r=null==t?void 0:t.center)||void 0===r||r,s=null===(n=null==t?void 0:t.moveCursor)||void 0===n||n,a=null===(o=null==t?void 0:t.activatePane)||void 0===o||o,u=null==t?void 0:t.activateItem,l=null==t?void 0:t.line,c=null==t?void 0:t.column,d=null==t?void 0:t.pending,f=atom.workspace.getActiveTextEditor();if(null!=f&&f.getPath()===e){const e=atom.workspace.paneContainerForItem(f);return(0,ae.default)(null!=e),a&&e.activate(),null!=l?le(f,{line:l,column:null==c?0:c,center:i,moveCursor:s}):(0,ae.default)(null==c,"goToLocation: Cannot specify just column"),f}{const t=await atom.workspace.open(e,{initialLine:l,initialColumn:c,searchAllPanes:!0,activatePane:a,activateItem:u,pending:d});if(null==t){const t={};Error.captureStackTrace(t);const r=Error(`atom.workspace.open returned null on ${e}`);throw(0,ie.getLogger)("goToLocation").error(r),r}return i&&null!=l&&t.scrollToBufferPosition([l,c],{center:!0}),t}},oe.goToLocationInEditor=le,oe.observeNavigatingEditors=function(){return ue};var ie=c.default,se=u.default,ae=function(e){return e&&e.__esModule?e:{default:e}}(l.default);const ue=new se.Subject;function le(e,t){const r=null==t.center||t.center,n=null==t.moveCursor||t.moveCursor,{line:o,column:i}=t;n&&e.setCursorBufferPosition([o,i]),r&&e.scrollToBufferPosition([o,i],{center:!0}),ue.next(e)}Object.defineProperty(V,"__esModule",{value:!0}),V.applyTextEditsForMultipleFiles=async function(e){const t=Array.from(e.keys()),r=(await Promise.all(t.map((async e=>(0,pe.goToLocation)(e))))).map((e=>{(0,de.default)(null!=e);const t=e.getBuffer();return[t,t.createCheckpoint()]})),n=t.reduce(((t,r)=>{const n=e.get(r);return t&&null!=n&&me(r,...n)}),!0);n||r.forEach((([e,t])=>(e.revertToCheckpoint(t),!1)));return n},V.applyTextEdits=me;var ce=V.applyTextEditsToBuffer=function(e,t){return ge(e,ye(t))},de=function(e){return e&&e.__esModule?e:{default:e}}(l.default),fe=c.default,he=J,pe=oe;function me(e,...t){const r=ye(t),n=(0,he.existingEditorForUri)(e);return(0,de.default)(null!=n),ge(n.getBuffer(),r)}function ge(e,t){if(function(e){for(let t=0;t<e.length-1;t++)if(e[t].oldRange.end.isGreaterThan(e[t+1].oldRange.start))return!0;return!1}(t))return(0,fe.getLogger)("text-edit").warn("applyTextEdits was called with overlapping edits."),!1;if(1===t.length&&t[0].oldRange.isEqual(e.getRange()))return(null==t[0].oldText||t[0].oldText===e.getText())&&(e.setTextViaDiff(t[0].newText),!0);const r=e.createCheckpoint();for(let n=t.length-1;n>=0;n--){if(!ve(e,t[n]))return e.revertToCheckpoint(r),!1}return e.groupChangesSinceCheckpoint(r),!0}function ve(e,t){if(t.oldRange.start.row===t.oldRange.end.row){const r=e.lineLengthForRow(t.oldRange.start.row);if(t.oldRange.end.column>r)return!1}if(null!=t.oldText){if(e.getTextInRange(t.oldRange)!==t.oldText)return!1}return e.setTextInRange(t.oldRange,t.newText),!0}function ye(e){return e.map(((e,t)=>[e,t])).sort((([e,t],[r,n])=>e.oldRange.start.compare(r.oldRange.start)||e.oldRange.end.compare(r.oldRange.end)||t-n)).map((([e])=>e))}Object.defineProperty(h,"__esModule",{value:!0});var _e=h.registerOnWillSave=function(e){return Se.addProvider(e)};h.observeTextEditors=function(){const e=new xe.default;return e.add(atom.workspace.observeTextEditors((t=>{e.add(function(e){const t=e.save,r=e;return r.save=async()=>{const n=new Date;n.setTime(n.getTime()+5e3);try{await function(e){if(null==e.getPath())return we.Observable.empty();const t=Array.from(Se.getAllProvidersForEditor(e));return we.Observable.concat(...t.map((t=>t.callback(e).toArray().race(we.Observable.of([]).delay(t.timeout)).map((t=>(0,Te.applyTextEditsToBuffer)(e.getBuffer(),t))))))}(r).timeout(n).toPromise()}catch(t){const n=Array.from(Se.getAllProvidersForEditor(r));(0,Pe.track)("timeout-on-save",{uri:e.getPath(),providers:n})}finally{await t.call(e)}},new xe.default((()=>{r.save=t}))}(t))}))),e};var we=u.default,Pe=p,be=Ee(z),Te=V,xe=Ee(g);function Ee(e){return e&&e.__esModule?e:{default:e}}const Se=new be.default;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});var ke=Oe.ProviderRegistry=void 0;const Re=a.default;ke=Oe.ProviderRegistry=class{constructor(){this.providers=[]}addProvider(e){const t=this.providers.findIndex((t=>e.priority>t.priority));return-1===t?this.providers.push(e):this.providers.splice(t,0,e),new Re.Disposable((()=>{this.removeProvider(e)}))}removeProvider(e){const t=this.providers.indexOf(e);-1!==t&&this.providers.splice(t,1)}getProviderForEditor(e){const t=e.getGrammar().scopeName;return this.findProvider(t)}getAllProvidersForEditor(e){const t=e.getGrammar().scopeName;return this.findAllProviders(t)}findProvider(e){for(const t of this.findAllProviders(e))return t;return null}*findAllProviders(e){for(const t of this.providers)null!=t.grammarScopes&&-1===t.grammarScopes.indexOf(e)||(yield t)}};var Ce,Ae,je={},Ue={exports:{}};Ce=Ue,void 0!==(Ae=function(e,t){function r(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,r)}function o(e){return e.replace(/[#?]/,r)}Object.defineProperty(t,"__esModule",{value:!0});var i,s=function(){function e(){this._scheme=e._empty,this._authority=e._empty,this._path=e._empty,this._query=e._empty,this._fragment=e._empty,this._formatted=null,this._fsPath=null}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme},Object.defineProperty(e.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fsPath",{get:function(){var t;return this._fsPath||(t=this._authority&&this._path&&"file"===this.scheme?"//"+this._authority+this._path:e._driveLetterPath.test(this._path)?this._path[1].toLowerCase()+this._path.substr(2):this._path,i&&(t=t.replace(/\//g,"\\")),this._fsPath=t),this._fsPath},enumerable:!0,configurable:!0}),e.prototype.with=function(t){if(!t)return this;var r=t.scheme,n=t.authority,o=t.path,i=t.query,s=t.fragment;if(void 0===r?r=this.scheme:null===r&&(r=""),void 0===n?n=this.authority:null===n&&(n=""),void 0===o?o=this.path:null===o&&(o=""),void 0===i?i=this.query:null===i&&(i=""),void 0===s?s=this.fragment:null===s&&(s=""),r===this.scheme&&n===this.authority&&o===this.path&&i===this.query&&s===this.fragment)return this;var a=new e;return a._scheme=r,a._authority=n,a._path=o,a._query=i,a._fragment=s,e._validate(a),a},e.parse=function(t){var r=new e,n=e._parseComponents(t);return r._scheme=n.scheme,r._authority=decodeURIComponent(n.authority),r._path=decodeURIComponent(n.path),r._query=decodeURIComponent(n.query),r._fragment=decodeURIComponent(n.fragment),e._validate(r),r},e.file=function(t){var r=new e;if(r._scheme="file",i&&(t=t.replace(/\\/g,e._slash)),t[0]===e._slash&&t[0]===t[1]){var n=t.indexOf(e._slash,2);-1===n?r._authority=t.substring(2):(r._authority=t.substring(2,n),r._path=t.substring(n))}else r._path=t;return r._path[0]!==e._slash&&(r._path=e._slash+r._path),e._validate(r),r},e._parseComponents=function(t){var r={scheme:e._empty,authority:e._empty,path:e._empty,query:e._empty,fragment:e._empty},n=e._regexp.exec(t);return n&&(r.scheme=n[2]||r.scheme,r.authority=n[4]||r.authority,r.path=n[5]||r.path,r.query=n[7]||r.query,r.fragment=n[9]||r.fragment),r},e.from=function(t){return(new e).with(t)},e._validate=function(t){if(t.scheme&&!e._schemePattern.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path)if(t.authority){if(!e._singleSlashStart.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(e._doubleSlashStart.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')},e.prototype.toString=function(t){return void 0===t&&(t=!1),t?e._asFormatted(this,!0):(this._formatted||(this._formatted=e._asFormatted(this,!1)),this._formatted)},e._asFormatted=function(t,r){var i=r?o:n,s=[],a=t.scheme,u=t.authority,l=t.path,c=t.query,d=t.fragment;if(a&&s.push(a,":"),(u||"file"===a)&&s.push("//"),u&&(-1===(p=(u=u.toLowerCase()).indexOf(":"))?s.push(i(u)):s.push(i(u.substr(0,p)),u.substr(p))),l){var f=e._upperCaseDrive.exec(l);f&&(l=f[1]?"/"+f[2].toLowerCase()+l.substr(3):f[2].toLowerCase()+l.substr(2));for(var h=0;;){var p;if(-1===(p=l.indexOf(e._slash,h))){s.push(i(l.substring(h)));break}s.push(i(l.substring(h,p)),e._slash),h=p+1}}return c&&s.push("?",i(c)),d&&s.push("#",i(d)),s.join(e._empty)},e.prototype.toJSON=function(){var e={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},e.revive=function(t){var r=new e;return r._scheme=t.scheme||e._empty,r._authority=t.authority||e._empty,r._path=t.path||e._empty,r._query=t.query||e._empty,r._fragment=t.fragment||e._empty,r._fsPath=t.fsPath,r._formatted=t.external,e._validate(r),r},e}();if(s._empty="",s._slash="/",s._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,s._driveLetterPath=/^\/[a-zA-z]:/,s._upperCaseDrive=/^(\/)?([A-Z]:)/,s._schemePattern=/^\w[\w\d+.-]*$/,s._singleSlashStart=/^\//,s._doubleSlashStart=/^\/\//,t.default=s,"object"==typeof process)i="win32"===process.platform;else if("object"==typeof navigator){var a=navigator.userAgent;i=a.indexOf("Windows")>=0}}(0,Ue.exports))&&(Ce.exports=Ae);for(var Fe={},$e={quote:function(e){return e.map((function(e){return e&&"object"==typeof e?e.op.replace(/(.)/g,"\\$1"):/["\s]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(e)?'"'+e.replace(/(["\\$`!])/g,"\\$1")+'"':String(e).replace(/([#!"$&'()*,:;<=>?@\[\\\]^`{|}])/g,"\\$1")})).join(" ")}},Me="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","[&;()|<>]"].join("|")+")",Ie="(\\\\['\"|&;()<> \\t]|[^\\s'\"|&;()<> \\t])+",De="",Le=0;Le<4;Le++)De+=(Math.pow(16,8)*Math.random()).toString(16);$e.parse=function(e,t,r){var n=function(e,t,r){var n=new RegExp(["("+Me+")","("+Ie+"|\"((\\\\\"|[^\"])*?)\"|'((\\\\'|[^'])*?)')*"].join("|"),"g"),o=e.match(n).filter(Boolean),i=!1;if(!o)return[];t||(t={});r||(r={});return o.map((function(e,t){if(!i){if("#"===e.charAt(0))return i=!0,{comment:e.substr(1)+o.slice(t+1).join(" ")};if(RegExp("^"+Me+"$").test(e))return{op:e};for(var n="'",a='"',u="$",l=r.escape||"\\",c=!1,d=!1,f="",h=!1,p=0,m=e.length;p<m;p++){var g=e.charAt(p);if(h=h||!c&&("*"===g||"?"===g),d)f+=g,d=!1;else if(c)g===c?c=!1:c==n?f+=g:g===l?(p+=1,f+=(g=e.charAt(p))===a||g===l||g===u?g:l+g):f+=g===u?v():g;else if(g===a||g===n)c=g;else{if(RegExp("^"+Me+"$").test(g))return{op:e};g===l?d=!0:f+=g===u?v():g}}return h?{op:"glob",pattern:f}:f}function v(){var t,r;if(p+=1,"{"===e.charAt(p)){if(p+=1,"}"===e.charAt(p))throw new Error("Bad substitution: "+e.substr(p-2,3));if((t=e.indexOf("}",p))<0)throw new Error("Bad substitution: "+e.substr(p));r=e.substr(p,t-p),p=t}else/[*@#?$!_\-]/.test(e.charAt(p))?(r=e.charAt(p),p+=1):(t=e.substr(p).match(/[^\w\d_]/))?(r=e.substr(p,t.index),p+=t.index-1):(r=e.substr(p),p=e.length);return s(null,"",r)}})).reduce((function(e,t){return void 0===t?e:e.concat(t)}),[]);function s(e,r,n){var o="function"==typeof t?t(n):t[n];return void 0===o&&(o=""),"object"==typeof o?r+De+JSON.stringify(o)+De:r+o}}(e,t,r);return"function"!=typeof t?n:n.reduce((function(e,t){if("object"==typeof t)return e.concat(t);var r=t.split(RegExp("("+De+".*?"+De+")","g"));return 1===r.length?e.concat(r[0]):e.concat(r.filter(Boolean).map((function(e){return RegExp("^"+De).test(e)?JSON.parse(e.split(De)[1]):e})))}),[])},Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.stringifyError=function(e){return`name: ${e.name}, message: ${e.message}, stack: ${e.stack}.`},Fe.maybeToString=function(e){return String(e)},Fe.relativeDate=function(e,t,r=!1,n=!1){let o=e,i=t;o instanceof Date&&(o=o.getTime());i||(i=(new Date).getTime());i instanceof Date&&(i=i.getTime());const s=i-o,a=r?Ve:n?Xe:Je;for(const[e,t,n]of a)if(s<e)return"number"==typeof n?Math.round(s/n)+(r?"":" ")+t:t;throw new Error("This should never be reached.")},Fe.countOccurrences=function(e,t){(0,Ne.default)(1===t.length,"char must be a string of length 1");let r=0;const n=t.charCodeAt(0);for(let t=0;t<e.length;t++)e.charCodeAt(t)===n&&r++;return r},Fe.shellParse=function(e,t){const r=(0,Be.parse)(e,t);for(let e=0;e<r.length;e++)if("string"!=typeof r[e])throw null!=r[e].op?new Error(`Unexpected operator "${r[e].op}" provided to shellParse`):new Error(`Unexpected comment "${r[e].comment}" provided to shellParse`);return r},Fe.shellParseWithGlobs=function(e,t){const r=(0,Be.parse)(e,t);for(let e=0;e<r.length;e++)if("string"!=typeof r[e]){if("glob"!==r[e].op)throw null!=r[e].op?new Error(`Unexpected operator "${r[e].op}" provided to shellParse`):new Error(`Unexpected comment "${r[e].comment}" provided to shellParse`);r[e]=r[e].pattern}return r},Fe.shellQuote=function(e){return(0,Be.quote)(e)},Fe.removeCommonPrefix=function(e,t){let r=0;for(;e[r]===t[r]&&r<e.length&&r<t.length;)r++;return[e.substring(r),t.substring(r)]},Fe.removeCommonSuffix=function(e,t){let r=0;for(;e[e.length-1-r]===t[t.length-1-r]&&r<e.length&&r<t.length;)r++;return[e.substring(0,e.length-r),t.substring(0,t.length-r)]},Fe.shorten=function(e,t,r){return e.length<t?e:e.slice(0,t)+(r||"")},Fe.splitOnce=function(e,t){const r=e.indexOf(t);return-1===r?[e,null]:[e.slice(0,r),e.slice(r+t.length)]},Fe.indent=function(e,t=2,r=" "){return e.replace(/^([^\n])/gm,r.repeat(t)+"$1")},Fe.pluralize=function(e,t){return 1===t?e:e+"s"},Fe.capitalize=function(e){return 0===e.length?e:e.charAt(0).toUpperCase().concat(e.slice(1))},Fe.getMatchRanges=function(e,t){if(""===t)return[];const r=[];let n=0;for(;-1!==(n=e.indexOf(t,n));){const e=r[r.length-1];null!=e&&e[1]===n?e[1]+=t.length:r.push([n,n+t.length]),n+=t.length}return r},Fe.escapeMarkdown=function(e){return e.replace(/[#!()*+\-.[\\\]_`{}]/g,"\\$&").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Fe.ZERO_WIDTH_SPACE=Fe.ELLIPSIS_CHAR=Fe.URL_REGEX=void 0;var Ne=function(e){return e&&e.__esModule?e:{default:e}}(l.default),Be=$e;const We=36e5,qe=24*We,He=7*qe,ze=365*qe,Ge=ze/12,Ve=[[42e3,"now"],[9e4,"1m"],[36e5,"m",6e4],[54e5,"1h"],[qe,"h",We],[2*qe,"1d"],[7*qe,"d",qe],[1.5*He,"1w"],[Ge,"w",He],[1.5*Ge,"1mo"],[ze,"mo",Ge],[1.5*ze,"1y"],[Number.MAX_VALUE,"y",ze]],Je=[[42e3,"just now"],[9e4,"a minute ago"],[36e5,"minutes ago",6e4],[54e5,"an hour ago"],[qe,"hours ago",We],[2*qe,"yesterday"],[7*qe,"days ago",qe],[1.5*He,"a week ago"],[Ge,"weeks ago",He],[1.5*Ge,"a month ago"],[ze,"months ago",Ge],[1.5*ze,"a year ago"],[Number.MAX_VALUE,"years ago",ze]],Xe=[[42e3,"just now"],[9e4,"1 minute ago"],[36e5,"minutes ago",6e4],[54e5,"1 hour ago"],[qe,"hours ago",We],[2*qe,"yesterday"],[7*qe,"days ago",qe],[1.5*He,"1 week ago"],[Ge,"weeks ago",He],[1.5*Ge,"1 month ago"],[ze,"months ago",Ge],[1.5*ze,"1 year ago"],[Number.MAX_VALUE,"years ago",ze]];Fe.URL_REGEX=/(https?:\/\/(?:www\.)?[-\w@:%.+~#=]{2,256}\.[a-z]{2,6}\b[-\w@:%+.~#?&/=!]*|www\.[-\w@:%.+~#=]{2,256}\.[a-z]{2,6}\b[-\w@:%+.~#?&/=!]*)/;Fe.ELLIPSIS_CHAR="…";Fe.ZERO_WIDTH_SPACE="​",Object.defineProperty(je,"__esModule",{value:!0}),je.__TEST__=Mt=je.default=void 0;var Ze=tt(Ue.exports),Ke=tt(l.default),Qe=tt(d.default),Ye=tt(f.default),et=Fe;function tt(e){return e&&e.__esModule?e:{default:e}}const rt=[],nt=/^[A-Za-z0-9_-]+:\/\/.*/;function ot(e){return e.startsWith("nuclide://")}function it(e){return e.startsWith("atom://")}function st(e,t){return(0,Ke.default)(null!=t&&""!==t,"NuclideUri must include a path."),`nuclide://${e}${t}`}function at(e){if(e.startsWith("nuclide://")){const t=e.substr("nuclide://".length),r=t.indexOf("/");(0,Ke.default)(-1!==r,`Remote URIs must contain a hostname and a path. Failed to parse ${e}`);const n=t.substr(0,r);(0,Ke.default)(""!==n,`Remote URIs must contain a hostname. Failed to parse ${e}`);const o=t.substr(r);return(0,Ke.default)(!At(e),`Path cannot end with archive separator. Failed to parse ${e}`),{hostname:n,path:o}}return(0,Ke.default)(!At(e),`Path cannot end with archive separator. Failed to parse ${e}`),{hostname:null,path:e}}function ut(e){if(!ot(e))throw new Error("Expected remote uri. Got "+e);const t=at(e);return(0,Ke.default)(t.hostname,`Remote Nuclide URIs must contain hostnames, '${(0,et.maybeToString)(t.hostname)}' found while parsing '${e}'`),{hostname:t.hostname,path:t.path}}function lt(e){return at(e).path}function ct(e){return ut(e).hostname}function dt(e,...t){return ft(e,t)}function ft(e,t){Ut(e);const r=St(e);if(ot(e)){const{hostname:n,path:o}=ut(e);return t.splice(0,0,o),Ot(r,t),Rt(r,st(n,r.join.apply(null,t)))}return t.splice(0,0,e),Ot(r,t),Rt(r,r.join.apply(null,t))}function ht(e){Ut(e);const t=St(e);if(ot(e)){const{hostname:r,path:n}=ut(e);return st(r,Rt(t,t.normalize(kt(t,n))))}return Rt(t,t.normalize(kt(t,e)))}function pt(e,t=""){Ut(e);const r=St(e);return Rt(r,r.basename(kt(r,lt(e)),t))}function mt(e){Ut(e);const t=St(e);if(ot(e)){const{hostname:r,path:n}=ut(e);return st(r,Rt(t,t.dirname(kt(t,n))))}return Rt(t,t.dirname(kt(t,e)))}function gt(e){Ut(e);const t=St(e);return Rt(t,t.extname(kt(t,lt(e))))}function vt(e){const t="file://";if(!e.startsWith(t))return null;const r=e.substr(t.length);return function(e){return St(e)===Qe.default.win32}(r)?r:null}function yt(e,t){if(Ut(e),Ut(t),t.length<e.length)return!(t.length<e.length-1)&&(e.startsWith(t)&&(Tt(e)||jt(t,e.length)));if(!t.startsWith(e))return!1;if(Tt(e)||e.length===t.length)return!0;const r=St(t);return jt(t,e.length)||t.slice(e.length).startsWith(r.sep)}const _t=[];function wt(e){return _t.reduce(((e,t)=>{const r=t(e);return null!=r&&""!==r?r:e}),e)}function Pt(e){return Ut(e),ot(e)?wt(ct(e)):e}function bt(e){Ut(e);const t=St(e);return e.endsWith(t.sep)?e:e+t.sep}function Tt(e){Ut(e);const t=St(e);return e.endsWith(t.sep)}function xt(e){if(Ut(e),ot(e))return!0;return St(e).isAbsolute(e)}function Et(e){return Ut(e),mt(e)===e}function St(e){return(0,Ke.default)(!At(e),`Path cannot end with archive separator. Failed to determine path module for ${e}`),e.startsWith(Qe.default.posix.sep)||e.indexOf("://")>-1?Qe.default.posix:":"===e[1]&&e[2]===Qe.default.win32.sep||e.split(Qe.default.win32.sep).length>e.split(Qe.default.posix.sep).length?Qe.default.win32:Qe.default.posix}function Ot(e,t){return t.forEach(((t,r,n)=>n[r]=kt(e,t))),t}function kt(e,t){return t.indexOf("!")<0?t:rt.reduce(((t,r)=>t.replace(`${r}!`,`${r}!${e.sep}`)),t)}function Rt(e,t){return t.indexOf("!")<0?t:At(r=rt.reduce(((t,r)=>t.replace(`${r}!${e.sep}`,`${r}!`)),t))?r.substring(0,r.length-"!".length):r;var r}function Ct(e,t){return e.length<t.length&&t.startsWith(e)&&jt(t,e.length)?e+"!":e}function At(e){return jt(e,e.length-1)}function jt(e,t){return e.length>t&&"!"===e.charAt(t)&&rt.some((r=>{const n=t-r.length;return e.indexOf(r,n)===n}))}function Ut(e){if(null!=e&&At(e))throw new Error(`Path operation invoked on URI ending with !: ${e}`)}const Ft=new Set([".bmp",".gif",".ico",".jpeg",".jpg",".png",".webp"]);var $t={basename:pt,dirname:mt,extname:gt,stripExtension:function(e){Ut(e);const t=gt(e);return 0===t.length?e:e.slice(0,-1*t.length)},isRemote:ot,isLocal:function(e){return!ot(e)&&!function(e){return nt.test(e)}(e)&&!it(e)},createRemoteUri:st,isInArchive:function(e){if(it(e)||e.indexOf("!")<0)return!1;for(let t=e.indexOf("!");t>=0;t=e.indexOf("!",t+1))if(jt(e,t))return!0;return!1},ancestorOutsideArchive:function(e){for(let t=e.indexOf("!");t>=0;t=e.indexOf("!",t+1))if(jt(e,t))return e.substring(0,t);return e},parse:at,parseRemoteUri:ut,validate:function(e,t){(0,Ke.default)(null!=e,"Unexpected null NuclideUri"),(0,Ke.default)("string"==typeof e,`Unexpected NuclideUri type: ${String(e)}`),ot(e)?(at(e),(0,Ke.default)(!1!==t,"Expected remote NuclideUri")):((0,Ke.default)(""!==e,"NuclideUri must contain a non-empty path"),(0,Ke.default)(!0!==t,"Expected local NuclideUri"))},getPath:lt,getHostname:ct,getHostnameOpt:function(e){return null!=e&&ot(e)?ct(e):null},join:dt,joinArray:ft,archiveJoin:function(e,t){if(Ut(e),!rt.some((t=>e.endsWith(t))))throw new Error(`Cannot archiveJoin with non-archive ${e} and ${t}`);return e+"!"+t},relative:function(e,t){Ut(e);const r=St(e),n=ot(e);if(n!==ot(t)||n&&ct(e)!==ct(t))throw new Error(`Cannot relative urls on different hosts: ${e} and ${t}`);const o=kt(r,n?lt(e):e),i=kt(r,n?lt(t):t);return Rt(r,r.relative(Ct(o,i),Ct(i,o)))},looksLikeImageUri:function(e){const t=gt(e).toLowerCase();return Ft.has(t)},normalize:ht,normalizeDir:function(e){return bt(ht(e))},getParent:function(e){return ht(dt(e,".."))},uriToNuclideUri:function(e){const t=vt(e);if(null!=t)return t;const r=Ze.default.parse(e);return"file"===r.scheme&&r.path?r.fsPath:ot(e)?e:null},nuclideUriToUri:function(e){return Ut(e),ot(e)?e:Ze.default.file(e).toString()},contains:yt,collapse:function(e){return e.filter((t=>!e.some((e=>yt(e,t)&&e!==t))))},nuclideUriToDisplayString:function(e){return Ut(e),ot(e)?`${Pt(e)}:${lt(e)}`:e},nuclideUriToDisplayHostname:Pt,hostnameToDisplayHostname:wt,registerHostnameFormatter:function(e){return _t.push(e),{dispose:()=>{const t=_t.indexOf(e);t>=0&&_t.splice(t,1)}}},ensureTrailingSeparator:bt,trimTrailingSeparator:function(e){Ut(e);const t=St(e);let r=e;for(;r.endsWith(t.sep)&&!Et(r);)r=r.slice(0,-1*t.sep.length);return r},endsWithSeparator:Tt,endsWithEdenDir:function(e){return Ut(e),e.endsWith(".eden")},isAbsolute:xt,isHomeRelative:function(e){return Ut(e),e.startsWith("~")},resolve:function(e,...t){Ut(e);const r=St(e);if(ot(e)){const{hostname:n,path:o}=ut(e);return t.splice(0,0,o),Ot(r,t),st(n,Rt(r,r.resolve.apply(null,t)))}return t.splice(0,0,e),Ot(r,t),Rt(r,r.resolve.apply(null,t))},expandHomeDir:function(e){if(Ut(e),!e.startsWith("~"))return e;const{HOME:t,UserProfile:r}=process.env,n=!ot(e)&&"win32"===Ye.default.platform(),o=n?r:t;return(0,Ke.default)(null!=o),"~"===e?o:e.startsWith("~/")||n&&e.startsWith("~\\")?Qe.default.resolve(o,e.replace("~",".")):e},splitPathList:function(e){(0,Ke.default)(e.indexOf("nuclide://")<0,"Splitting remote URIs is not supported");const t=St(e);return e.split(t.delimiter)},joinPathList:function(e){if(0===e.length)return"";(0,Ke.default)(e.every((e=>!ot(e))),"Joining of remote URIs is not supported");const t=St(e[0]);return e.join(t.delimiter)},ensureLocalPrefix:function(e){Ut(e);const t=St(e);(0,Ke.default)(!ot(e),"Local prefix can not be added to a remote path"),(0,Ke.default)(!xt(e),"Local prefix can not be added to an absolute path");const r=`.${t.sep}`;return e.startsWith(r)?e:r+e},isRoot:Et,parsePath:function(e){Ut(e);const t=St(e),r=t.parse(kt(t,lt(e)));return{root:Rt(t,r.root),dir:Rt(t,r.dir),base:Rt(t,r.base),ext:Rt(t,r.ext),name:Rt(t,r.name)}},split:function(e){const t=[];let r=e,n=mt(r);for(;r!==n;)t.push(pt(r)),r=n,n=mt(r);return xt(e)&&t.push(n),t.reverse(),t},pathSeparatorFor:function(e){return St(e).sep},hasKnownArchiveExtension:function(e){return rt.some((t=>e.endsWith(t)))},ARCHIVE_SEPARATOR:"!",KNOWN_ARCHIVE_EXTENSIONS:rt,NUCLIDE_URI_TYPE_NAME:"NuclideUri"},Mt=je.default=$t;const It={_pathModuleFor:St};je.__TEST__=It;class Dt{constructor(){this._subscriptions=new e.CompositeDisposable(atom.commands.add("atom-text-editor","code-format:format-code",(async e=>{const t=e.currentTarget.getModel(),r=await this._formatCodeInTextEditor(t);try{if(!ce(t.getBuffer(),r))throw new Error("No code formatting providers found!")}catch(e){atom.notifications.addError(`Failed to format code: ${e.message}`,{detail:e.detail})}})),atom.workspace.observeTextEditors((e=>{const t=e.getBuffer().onDidStopChanging((async t=>{try{await this._formatCodeOnTypeInTextEditor(e,t)}catch(e){n.getLogger("code-format").warn("Failed to format code on type:",e)}}));e.onDidDestroy((()=>t.dispose()))})),_e((()=>({priority:0,timeout:2500,callback:this._formatCodeOnSaveInTextEditor.bind(this)})))),this._rangeProviders=new ke,this._fileProviders=new ke,this._onTypeProviders=new ke,this._onSaveProviders=new ke}async _formatCodeInTextEditor(t,r){const n=t.getBuffer(),o=null!=r?r:t.getSelectedBufferRange(),{start:i,end:s}=o;let a;a=o.isEmpty()?n.getRange():new e.Range([i.row,0],0===s.column?s:[s.row+1,0]);const u=[...this._rangeProviders.getAllProvidersForEditor(t)],l=[...this._fileProviders.getAllProvidersForEditor(t)],c=t.getText(),d=(await this._reportBusy(t,Promise.all(u.map((e=>e.formatCode(t,a)))))).filter((e=>e.length>0)),f=(await this._reportBusy(t,Promise.all(l.map((e=>e.formatEntireFile(t,a)))))).filter((e=>null!=e)).map((({formatted:e})=>[{oldRange:t.getBuffer().getRange(),newText:e,oldText:c}]));return(a.isEqual(n.getRange())?f.concat(d):d.concat(f)).flat()}async _formatCodeOnTypeInTextEditor(e,t){if(1!==t.changes.length)return[];const r=t.changes[0];if(!function(e){if(""!==e.oldText)return!1;if(""===e.newText)return!1;if(e.newText.length>1&&!function(e){if(void 0===atom.packages.getActivePackage("bracket-matcher"))return!1;return atom.config.get("bracket-matcher.autocompleteCharacters").includes(e)}(e.newText))return!1;return!0}(r)||!atom.config.get("atom-ide-code-format.formatOnType"))return[];const n=r.newText[r.newText.length-1],o=[...this._onTypeProviders.getAllProvidersForEditor(e)];if(0===o.length)return[];const i=e.getText(),s=e.getCursorBufferPosition().copy(),a=await Promise.all(o.map((t=>t.formatAtPosition(e,e.getCursorBufferPosition(),n)))),u=a.findIndex((e=>e.length>0));if(-1===u)return[];{const t=a[u],r=o[u];if(function(e,t){if(e!==t)throw new Error("The file contents were changed before formatting was complete.")}(i,e.getText()),!ce(e.getBuffer(),t))throw new Error("Could not apply edits to text buffer.");return r.keepCursorPosition&&e.setCursorBufferPosition(s),t}}async _formatCodeOnSaveInTextEditor(e){const t=[...this._onSaveProviders.getAllProvidersForEditor(e)];if(t.length>0){return(await this._reportBusy(e,Promise.all(t.map((t=>t.formatOnSave(e)))),!1)).filter((e=>e.length>0)).flat()}return function(e){return atom.config.get("atom-ide-code-format.formatOnSave",{scope:e.getRootScopeDescriptor()})}(e)?this._formatCodeInTextEditor(e,e.getBuffer().getRange()):[]}_reportBusy(e,t,r=!0){const n=this._busySignalService;if(void 0!==n){const o=e.getPath(),i=void 0!==o?Mt.basename(o):"<untitled>";return n.reportBusyWhile(`Formatting code in ${i}`,(()=>t),{revealTooltip:r})}return t}addRangeProvider(e){return this._rangeProviders.addProvider(e)}addFileProvider(e){return this._fileProviders.addProvider(e)}addOnTypeProvider(e){return this._onTypeProviders.addProvider(e)}addOnSaveProvider(e){return this._onSaveProviders.addProvider(e)}consumeBusySignal(t){return this._busySignalService=t,new e.Disposable((()=>{this._busySignalService=void 0}))}dispose(){this._subscriptions.dispose()}}var Lt={formatOnSave:{title:"Format on Save",type:"boolean",default:!0,description:"Automatically format code upon saving for supported languages."},formatOnType:{title:"Format on Type",type:"boolean",default:!0,description:"Automatically format code as you type it for supported languages."}};let Nt;function Bt(e){return Nt.addRangeProvider(e)}function Wt(e){return Nt.addFileProvider(e)}function qt(e){return Nt.addOnTypeProvider(e)}function Ht(e){return Nt.addOnSaveProvider(e)}exports.activate=function(){Nt=new Dt},exports.config=Lt,exports.consumeBusySignal=function(e){return Nt.consumeBusySignal(e)},exports.consumeFileProvider=Wt,exports.consumeLegacyProvider=function(e){if(e.grammarScopes=e.grammarScopes||(null!=e.selector?e.selector.split(", "):null),e.priority=null!=e.priority?e.priority:null!=e.inclusionPriority?e.inclusionPriority:0,"formatCode"in e)return Bt(e);if("formatEntireFile"in e)return Wt(e);if("formatAtPosition"in e)return qt(e);if("formatOnSave"in e)return Ht(e);throw new Error("Invalid code format provider")},exports.consumeOnSaveProvider=Ht,exports.consumeOnTypeProvider=qt,exports.consumeRangeProvider=Bt,exports.deactivate=function(){Nt.dispose()};
//# sourceMappingURL=main.js.map
